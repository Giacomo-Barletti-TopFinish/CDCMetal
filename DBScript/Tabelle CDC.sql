drop SEQUENCE CDC_SEQUENCE;
CREATE SEQUENCE CDC_SEQUENCE START WITH 1 INCREMENT BY 1 CACHE 2;
drop table CDC_DETTAGLIO;

drop table CDC_EXCEL;
CREATE TABLE CDC_EXCEL
(
  IDEXCEL NUMBER(10) NOT NULL,
  NOMEFILE VARCHAR2(200) NOT NULL,
  DATAACQUISIZIONE DATE NOT NULL,
  DATARIFERIMENTO DATE NOT NULL,
  UTENTE VARCHAR2(50) NOT NULL,
  DATI BLOB NOT NULL,
  CONSTRAINT PK_IDEXCEL PRIMARY KEY (IDEXCEL)
);

CREATE INDEX IDX_CDC_EXCEL_2 ON CDC_EXCEL(DATARIFERIMENTO);


CREATE TABLE CDC_DETTAGLIO
(
  IDDETTAGLIO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  IDPRENOTAZIONE NUMBER(10) NOT NULL,
  IDEXCEL NUMBER(10) NOT NULL,
  IDVERBALE VARCHAR2(10) NULL,
  DATACOLLAUDO VARCHAR2(10) NOT NULL,
  ACCESSORISTA VARCHAR2(30) NOT NULL,
  PREFISSO VARCHAR2(7) NOT NULL,
  PARTE VARCHAR2(6) NOT NULL,
  COLORE VARCHAR2(5) NOT NULL,
  MISURA NUMBER (4),
  LIVELLODIFF NUMBER (1),
  COMMESSAORDINE VARCHAR2(18) NOT NULL,
  ENTE VARCHAR2(5) NOT NULL,
  UM VARCHAR2(2),
  QUANTITA NUMBER(6),
  ASSEGN VARCHAR2(2),
  AUTO VARCHAR2(5),
  COLLTO VARCHAR2(5),
   QUANTITAVALIDITA VARCHAR2(6),
  LOTTOBLOCCATO VARCHAR2(2),
  VERBALEBLOCCATO VARCHAR2(2),
  DEROGA VARCHAR2(2),
  CONTROLLODIMENSIONALE VARCHAR2(2),
  CONTROLLOESTETICO VARCHAR2(2),
  CONTROLLOFUNZIONALE VARCHAR2(2),
  ESITOTESTCHIMICO VARCHAR2(2),
  TESTFISICO VARCHAR2(2),
  NOTECOLLAUDO VARCHAR2(100),
  ASSEGNAZIONE VARCHAR2(500),
    CONSTRAINT PK_IDDETTAGLIO PRIMARY KEY (IDDETTAGLIO),
  FOREIGN KEY (IDEXCEL)
	  REFERENCES CDC_EXCEL (IDEXCEL) ENABLE
);


CREATE INDEX IDX_CDC_DETTAGLIO_1 ON CDC_DETTAGLIO(IDPRENOTAZIONE);
CREATE INDEX IDX_CDC_DETTAGLIO_2 ON CDC_DETTAGLIO(IDEXCEL);

CREATE TABLE CDC_PDF
(
IDCDCPDF NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  IDDETTAGLIO NUMBER NOT NULL,
  TIPO VARCHAR2(25) NOT NULL,
  NOMEFILE VARCHAR2(300) NOT NULL,
   CONSTRAINT PK_IDCDCPDF PRIMARY KEY (IDCDCPDF),
  FOREIGN KEY (IDDETTAGLIO)
	  REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_PDF_1 ON CDC_PDF(IDDETTAGLIO);

CREATE TABLE CDC_CONFORMITA
(
    IDCONFORMITA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDDETTAGLIO NUMBER NOT NULL,
    UTENTE VARCHAR2(50) NOT NULL,
    DATAINSERIMENTO DATE NOT NULL,
    FISICOCHIMICO VARCHAR2(1) NOT NULL,
    FUNZIONALE VARCHAR2(1) NOT NULL,
    DIMENSIONALE VARCHAR2(1) NOT NULL,
    ESTETICO VARCHAR2(1) NOT NULL,
    ACCONTO VARCHAR2(1) NOT NULL,
    SALDO VARCHAR2(1) NOT NULL,
    DESCRIZIONE VARCHAR2(50) NOT NULL,
    ALTRO VARCHAR2(50) NULL,
    CERTIFICATI VARCHAR2(50) NULL,
     CONSTRAINT PK_IDCONFORMITA PRIMARY KEY (IDCONFORMITA),
    FOREIGN KEY (IDDETTAGLIO)
    REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_CONFORMITA_1 ON CDC_CONFORMITA(IDDETTAGLIO);

CREATE TABLE CDC_CONFORMITA_DETTAGLIO
(
  IDCDCDET NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  PREFISSO VARCHAR2(7) NOT NULL,
  PARTE VARCHAR2(6) NOT NULL,
  COLORE VARCHAR2(5) NOT NULL,
  DESCRIZIONE VARCHAR2(50) NOT NULL,
   CONSTRAINT PK_IDCDCDET PRIMARY KEY (IDCDCDET)
);

CREATE INDEX IDX_CDC_CONFORMITA_DET_1 ON CDC_CONFORMITA_DETTAGLIO(PREFISSO, PARTE,COLORE);

CREATE TABLE CDC_DIMEMSIONI
(
    IDDIMENSIONALE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDDETTAGLIO NUMBER NOT NULL,
    UTENTE VARCHAR2(50) NOT NULL,
    DATAINSERIMENTO DATE NOT NULL,
    RIFERIMENTO VARCHAR2(2) NOT NULL,
    GRANDEZZA VARCHAR2(30) NOT NULL,
    RICHIESTO VARCHAR2(5) NOT NULL,
    TOLLERANZA VARCHAR2(5)  NULL,
    MINIMO VARCHAR2(5)  NULL,
    MASSIMO VARCHAR2(5)  NULL,
    TAMPONE VARCHAR2(50)  NULL,
    CONTAMPONE VARCHAR2(1) NOT NULL,
    CONFORME VARCHAR2(1) NOT NULL,
     CONSTRAINT PK_IDDIMENSIONALE PRIMARY KEY (IDDIMENSIONALE),
    FOREIGN KEY (IDDETTAGLIO)
    REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_DIMEMSIONI_1 ON CDC_DIMEMSIONI(IDDETTAGLIO);

CREATE TABLE CDC_DIMEMSIONI_MISURE
(
    IDCDCMIS NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    PARTE VARCHAR2(6) NOT NULL,
    RIFERIMENTO VARCHAR2(2) NOT NULL,
    GRANDEZZA VARCHAR2(30) NOT NULL,
    RICHIESTO VARCHAR2(5) NOT NULL,
    TOLLERANZA VARCHAR2(5)  NULL,
    MINIMO VARCHAR2(5)  NULL,
    MASSIMO VARCHAR2(5)  NULL,
    TAMPONE VARCHAR2(50)  NULL,
    CONTAMPONE VARCHAR2(1) NULL,
     CONSTRAINT PK_IDCDCMIS PRIMARY KEY (IDCDCMIS)
);

CREATE INDEX IDX_CDC_DIMEMSIONI_MISURE_1 ON CDC_DIMEMSIONI_MISURE(PARTE);


CREATE TABLE CDC_ANTIALLERGICO
(
    IDNICHELFREE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDDETTAGLIO NUMBER NOT NULL,
    UTENTE VARCHAR2(50) NOT NULL,
    DATAINSERIMENTO DATE NOT NULL,
    DATAPRODUZIONE DATE NOT NULL,
    NICHELFREE VARCHAR2(1) NOT NULL,
     CONSTRAINT PK_IDNICHELFREE PRIMARY KEY (IDNICHELFREE),
    FOREIGN KEY (IDDETTAGLIO)
    REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_ANTIALLERGICO_1 ON CDC_ANTIALLERGICO(IDDETTAGLIO);


CREATE TABLE CDC_COLORE
(
    IDCOLORE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDDETTAGLIO NUMBER NOT NULL,
    STRUMENTO VARCHAR2(50) NOT NULL,
    UTENTE VARCHAR2(50) NOT NULL,
    DATAINSERIMENTO DATE NOT NULL,
    DATACALIBRAZIONE DATE NOT NULL,
    COLORE VARCHAR2(2) NOT NULL,
    RICHIESTO VARCHAR2(7) NOT NULL,
    TOLLERANZA VARCHAR2(7)  NULL,
    RILEVATO VARCHAR2(7)  NULL,
    CONFORME VARCHAR2(1) NOT NULL,
    NOTA VARCHAR2(50) NULL,
     CONSTRAINT PK_IDCOLORE PRIMARY KEY (IDCOLORE),
    FOREIGN KEY (IDDETTAGLIO)
    REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_COLORE ON CDC_COLORE(IDDETTAGLIO);

CREATE TABLE CDC_GALVANICA
(
    IDGALVANICA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDDETTAGLIO NUMBER NOT NULL,
    STRUMENTO VARCHAR2(50) NOT NULL,
    UTENTE VARCHAR2(50) NOT NULL,
    DATAREFERTO DATE NOT NULL,
    SPESSORE VARCHAR2(5) NOT NULL,
    MISURECAMPIONE NUMBER NOT NULL,
    APPLICAZIONE VARCHAR2(50) NOT NULL,
     CONSTRAINT PK_IDGALVANICA PRIMARY KEY (IDGALVANICA),
    FOREIGN KEY (IDDETTAGLIO)
    REFERENCES CDC_DETTAGLIO (IDDETTAGLIO) ENABLE
);

CREATE INDEX IDX_CDC_GALVANICA_1 ON CDC_GALVANICA(IDDETTAGLIO);


CREATE TABLE CDC_MISURE
(
    IDMISURA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    IDGALVANICA NUMBER NOT NULL,
    NMISURA NUMBER NOT NULL,
    DATAMISURA DATE NOT NULL,
    TIPOMISURA VARCHAR2(2) NOT NULL,
    VALORE VARCHAR2(5) NOT NULL,
    NCOLONNA NUMBER NOT NULL,
     CONSTRAINT PK_IDMISURA PRIMARY KEY (IDMISURA),
    FOREIGN KEY (IDGALVANICA)
    REFERENCES CDC_GALVANICA (IDGALVANICA) ENABLE
);

CREATE INDEX IDX_CDC_MISURE_1 ON CDC_MISURE(IDGALVANICA);


CREATE TABLE CDC_SPESSORE
(
  PARTE VARCHAR2(6) NOT NULL,
  COLORE VARCHAR2(5) NOT NULL,
    SPESSORE VARCHAR2(5) NOT NULL
);

CREATE UNIQUE INDEX IDX_CDC_SPESSORE_1 ON CDC_SPESSORE(PARTE,COLORE);


CREATE TABLE CDC_APPLICAZIONE
(
    COLORE VARCHAR2(5) NOT NULL,
    APPLICAZIONE VARCHAR2(50) NOT NULL,
    CODICEEXCEL VARCHAR2(20) NOT NULL
);

CREATE UNIQUE INDEX IDX_CDC_APPLICAZIONE_1 ON CDC_APPLICAZIONE(COLORE,CODICEEXCEL);

CREATE TABLE CDC_MISURA_COLORE
(
    CODICEEXCEL VARCHAR2(20) NOT NULL,
    SEQUENZA NUMBER NOT NULL,
    TIPOMISURA VARCHAR2(2) NOT NULL,
    MASSIMO FLOAT NOT NULL,
    MINIMO FLOAT NOT NULL,
    DENOMINATORE FLOAT NOT NULL,
    FUNZIONE VARCHAR2(10) NOT NULL
  );
 

CREATE UNIQUE INDEX IDX_CDC_MISURA_COLORE_1 ON CDC_MISURA_COLORE(CODICEEXCEL,SEQUENZA);


INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0912','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0953','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0901','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8439','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0933','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8953','Au-Bz-Ottone,Cu-Zama.appx','Au_BB');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au_BB', 1, 'Au', 40, 32, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au_BB', 2, 'Sn', 250, 200, 100, 'CASUALE' );

INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8233','Au-Ni-Ottone,Cu-Zama.appx','Au_Ni');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8053','Au-Ni-Ottone,Cu-Zama.appx','Au_Ni');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au_Ni', 1, 'Au', 40, 30, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au_Ni', 2, 'Ni', 1300, 1000, 100, 'CASUALE' );


INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0933','Au-PdFe-Bz-Ottone,Cu-Zama.appx','Au-PdFe-BB');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au-PdFe-BB', 1, 'Au', 55, 43, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au-PdFe-BB', 2, 'Pd', 60, 48, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Au-PdFe-BB', 3, 'Sn', 250, 200, 100, 'CASUALE' );

INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0911','PdFe-Bz-Ottone,Cu-Zama.appx','PdFe-BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0926','PdFe-Bz-Ottone,Cu-Zama.appx','PdFe-BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8891','PdFe-Bz-Ottone,Cu-Zama.appx','PdFe-BB');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdFe-BB', 1, 'Pd', 38, 30, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdFe-BB', 2, 'Sn', 250, 200, 100, 'CASUALE' );

INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8926','PdNi-Bz-Ottone,Cu-Zama.appx','PdNi-BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8911','PdNi-Bz-Ottone,Cu-Zama.appx','PdNi-BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('0720','PdNi-Bz-Ottone,Cu-Zama.appx','PdNi-BB');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8931','PdNi-Bz-Ottone,Cu-Zama.appx','PdNi-BB');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdNi-BB', 1, 'Pd', 90, 80, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdNi-BB', 2, 'Sn', 250, 200, 100, 'CASUALE' );

INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8126','PdNi-Ni-Ottone,Cu-Zama.appx','PdNi-Ni');
INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8111','PdNi-Ni-Ottone,Cu-Zama.appx','PdNi-Ni');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdNi-Ni', 1, 'Pd', 27, 18, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'PdNi-Ni', 2, 'Ni', 1400, 1100, 100, 'CASUALE' );

INSERT INTO CDC_APPLICAZIONE (COLORE, APPLICAZIONE, CODICEEXCEL) VALUES ('8130','Ru-PdNi-Ni-Ottone,Cu-Zama.appx','Ru-PdNi-Ni');

INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Ru-PdNi-Ni', 1, 'Ru', 11, 5, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Ru-PdNi-Ni', 2, 'Pd', 27, 20, 100, 'CASUALE' );
INSERT INTO CDC_MISURA_COLORE ( CODICEEXCEL, SEQUENZA, TIPOMISURA, MASSIMO, MINIMO, DENOMINATORE, FUNZIONE ) VALUES ( 'Ru-PdNi-Ni', 3, 'Ni', 1250, 900, 100, 'CASUALE' );
